# UP Docker swarm DEMO

This repository contains two different projects. A gRPC server, and a REST Proxy. They each have a `requirements.txt` file that needs to be installed. Alternatively, there is a make command available to install them.
```shell
make deps
```

## Proto
There is a common protobuf definition for both services, available in `proto/services.proto`. The python files in the `proto` folder are autogenerated, and if there are any changes to the proto definition they should be updated. There is also a make command to do so.
```shell
make proto-build
```

## Run gRCP service
```shell
docker compose build report_service
docker compose up report_service -d
```


## Rest Proxy
### Building the image
```
docker-compose build rest-proxy
```
### Running locally
```
docker compose up rest-proxy -d
```

### Build the production image
```
docker build -f rest_proxy/Dockerfile . -t ts/reporting/rest-proxy:development --target=production
```
